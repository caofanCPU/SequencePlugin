
plugins {
    id 'java'
    id "org.jetbrains.intellij" version "0.4.21"
}

// 自定义task跑代码
task D8ENV {
    println('帝八哥正在编译插件....')
//    println "$System.env.IDEA_HOME"
    println("IDEA安装环境目录: " + System.getenv("IDEA_HOME"))
    println("更新IDEA后, 别忘修改变量\$IDEA_HOME")
}


intellij {
//    version '2020.1'
    localPath System.getenv("IDEA_HOME")
    pluginName 'SequenceDiagram'
    plugins = ['java']
    updateSinceUntilBuild false
    sandboxDirectory = "${project.rootDir}/.sandbox"
    jreRepo 'https://jetbrains.bintray.com/intellij-jbr'
}

patchPluginXml {
    sinceBuild 201.5656
    untilBuild '202.*'
}

//publishPlugin {
//    token intellijPublishToken
//}

group 'vanstudio'
version '3.0'

sourceCompatibility = 1.8

tasks.withType(JavaCompile) { options.encoding = 'UTF-8' }

repositories {
    jcenter()
}